<!-- src/app/products/products.component.html -->
<div class="row">
  <div class="col-md-11" style="margin-left: 20px">
    <h3 style="margin-top: 20px">List of Products</h3>
    <hr>
    
    <!-- Add Button to Toggle Form -->
    <button 
      class="btn btn-sm btn-primary mb-3"
      (click)="form = !form"> <!-- Toggle the form -->
      {{ form ? 'Hide' : 'Add Product' }}
    </button>
    
    <!-- FORM: For Adding New Product -->
    <div *ngIf="form" class="mb-5">
      <form>
        <!-- Product Code -->
        <div class="mb-3">
          <label for="product-code">Product Code</label>
          <input 
            id="product-code"
            class="form-control"
            type="text"
            [(ngModel)]="product.codeProduit"
            [ngModelOptions]="{standalone: true}">
        </div>

        <!-- Product Name -->
        <div class="mb-3">
          <label for="product-name">Product Name</label>
          <input 
            id="product-name"
            class="form-control"
            type="text"
            [(ngModel)]="product.libelleProduit"
            [ngModelOptions]="{standalone: true}">
        </div>

        <!-- Product Price -->
        <div class="mb-3">
          <label for="product-price">Price</label>
          <input 
            id="product-price"
            class="form-control"
            type="number"
            [(ngModel)]="product.prix"
            [ngModelOptions]="{standalone : true}">
        </div>

        <!-- Category ID -->
        <div class="mb-3">
          <label for="product-category-id">Category ID</label>
          <input 
            id="product-category-id"
            class="form-control"
            type="number"
            [(ngModel)]="product.categorieProduitId"
            [ngModelOptions]="{standalone : true}">
        </div>

        <!-- Stock ID -->
        <div class="mb-3">
          <label for="product-stock-id">Stock ID</label>
          <input 
            id="product-stock-id"
            class="form-control"
            type="number"
            [(ngModel)]="product.stockId"
            [ngModelOptions]="{standalone : true}">
        </div>

        <!-- Submit and Cancel Buttons -->
        <button 
          class="btn btn-success" 
          type="button" 
          (click)="addProduct()">Submit</button>

        <button class="btn btn-secondary" type="button" (click)="cancel()">Cancel</button>
      </form>
    </div>

    <!-- Existing Product List Table -->
    <table class="table table-bordered mt-3">
      <thead>
        <tr>
          <th>Id</th>
          <th>Code</th>
          <th>Name</th>
          <th>Price</th>
          <th>Create Date</th>
          <th>Update Date</th>
          <th>Category ID</th>
          <th>Stock ID</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of listProducts">
          <td>{{ p.idProduit }}</td>
          <td>{{ p.codeProduit }}</td>
          <td>{{ p.libelleProduit }}</td>
          <td>{{ p.prix }}</td>
          <td>{{ p.dateCreation | date }}</td>
          <td>{{ p.dateDerniereModification | date }}</td>
          <td>{{ p.categorieProduitId }}</td>
          <td>{{ p.stockId }}</td>
          <td>
            <button 
              type="button" 
              class="btn btn-outline-danger"
              (click)="deleteProduct(p.idProduit)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
